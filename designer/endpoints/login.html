<html>
    <head></head>
    <body>
        <form id="form" action="/authenticate" method="POST">
            <label>Username:</label>
            <input type="input" id="username" />
            <label>Password:</label>
            <input type="input" id="password" />
            <button>Submit</button>
        </form>
        <script>
            function authenticate() {
                const usernameElement = document.getElementById("username");
                const passwordElement = document.getElementById("password");
                const username = usernameElement.value;
                const secret = passwordElement.value;
                if (username && secret) {
                    sessionStorage.clear();
                    fetch("/authenticate", { headers: { username, secret } }).then(response => {
                        const token = response.headers.get("token");
                        if (token) {
                            sessionStorage.setItem("token",token);
                        }
                    }).catch(error => {
                        console.log(error);
                    });
                }
            }
            const formElement = document.getElementById('form');
            formElement.removeEventListener('submit', authenticate);
            formElement.addEventListener('submit', authenticate);
        </script>
    </body>
</html>